<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>IFC Viewer</title>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
      }
      #viewer-container {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="viewer-container"></div>

    <!-- 注意：这里使用 ES Module + unpkg 的 web-ifc-viewer -->
    <script type="module">
      import { IfcViewerAPI } from "https://unpkg.com/web-ifc-viewer@1.0.218/dist/index.js";
      import { Color } from "https://unpkg.com/three@0.173.0/build/three.module.js";

      const container = document.getElementById("viewer-container");

      // 创建 IFC Viewer
      const viewer = new IfcViewerAPI({
        container,
        backgroundColor: new Color(0xffffff),
      });

      viewer.axes.setAxes();
      viewer.grid.setGrid();

      // 告诉 IFC.js 去哪里加载 wasm（用 CDN，避免本地路径问题）
      await viewer.IFC.setWasmPath("https://unpkg.com/web-ifc@0.0.72/");

      // 这里写你仓库里的 IFC 路径（相对路径）
      // 假设文件是 /ifc/model.ifc
      const ifcUrl = "./ifc/TU Gebäude 3_2019.ifc"; // <- 这里改成你的文件名

      // 加载 IFC 模型
      const model = await viewer.IFC.loadIfcUrl(ifcUrl);

      // 加一点后处理效果（阴影等，可选）
      await viewer.shadowDropper.renderShadow(model.modelID);
      viewer.context.renderer.postProduction.active = true;
    </script>
  </body>
</html>